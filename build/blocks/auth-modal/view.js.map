{"version":3,"file":"blocks/auth-modal/view.js","mappings":"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","sources":["webpack://bwd-plus/webpack/bootstrap","webpack://bwd-plus/webpack/runtime/make namespace object","webpack://bwd-plus/./src/blocks/auth-modal/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Frontend js file\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const modalOpen = document.querySelectorAll('.open-modal');\r\n  const modalClose = document.querySelectorAll(\r\n    '.modal-btn-close, .modal-overlay'\r\n  );\r\n  const modal = document.querySelector('.wp-block-bwd-plus-auth-modal');\r\n  const tabs = document.querySelectorAll('.tabs a');\r\n  const signinForm = document.querySelector('#signin-tab');\r\n  const signupForm = document.querySelector('#signup-tab');\r\n\r\n  modalOpen.forEach(el => {\r\n    el.addEventListener('click', e => {\r\n      e.preventDefault();\r\n      modal.classList.add('modal-show');\r\n    });\r\n  });\r\n\r\n  modalClose.forEach(el => {\r\n    el.addEventListener('click', e => {\r\n      e.preventDefault();\r\n      modal.classList.remove('modal-show');\r\n    });\r\n  });\r\n\r\n  tabs.forEach(tab => {\r\n    tab.addEventListener('click', e => {\r\n      e.preventDefault();\r\n\r\n      tabs.forEach(tab => tab.classList.remove('active-tab'));\r\n      tab.classList.add('active-tab');\r\n\r\n      const tabId = e.target.getAttribute('href');\r\n      const tabContent = document.querySelector(tabId);    \r\n\r\n      if (tabContent === signinForm) {\r\n        signupForm.style.display = 'none';\r\n        signinForm.style.display = 'block';\r\n      } else {\r\n        signinForm.style.display = 'none';\r\n        signupForm.style.display = 'block';\r\n      }\r\n    });\r\n  });\r\n\r\n  // Signin form\r\n  signupForm.addEventListener('submit', async e => {\r\n    e.preventDefault();\r\n    const signupFieldset = signupForm.querySelector('fieldset');\r\n    signupFieldset.setAttribute('disabled', true);\r\n\r\n    const signupStatus = signupForm.querySelector('#signup-status');\r\n    signupStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please wait we are signing you in...\r\n      </div>\r\n    `;\r\n\r\n    const formData = {\r\n      username: signupForm.querySelector('#su-name').value,\r\n      email: signupForm.querySelector('#su-email').value,\r\n      password: signupForm.querySelector('#su-password').value,\r\n    }\r\n\r\n    const response = await fetch(bwdAuthRest.signup, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n\r\n    const responseJson = await response.json();\r\n\r\n    if ( responseJson.status === 1 ) {\r\n      signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          Success! Your account has been created. Please check your email to activate your account.\r\n        </div>\r\n      `;\r\n      location.reload();\r\n    } else {\r\n      signupStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          Unable to create your account. Please check your details and try again.\r\n        </div>\r\n      `;\r\n      signupFieldset.removeAttribute('disabled');\r\n    }\r\n\r\n  });\r\n\r\n  // Signin form\r\n  signinForm.addEventListener('submit', async e => {\r\n    e.preventDefault();\r\n    const signinFieldset = signinForm.querySelector('fieldset');\r\n    signinFieldset.setAttribute('disabled', true);\r\n\r\n    const signinStatus = signinForm.querySelector('#signin-status');\r\n    signinStatus.innerHTML = `\r\n      <div class=\"modal-status modal-status-info\">\r\n        Please wait we are signing you in...\r\n      </div>\r\n    `;\r\n\r\n    const formData = {\r\n      username: signinForm.querySelector('#si-email').value,\r\n      password: signinForm.querySelector('#si-password').value,\r\n    }\r\n    console.log(formData);\r\n\r\n    const response = await fetch(bwdAuthRest.login, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(formData),\r\n    });\r\n\r\n    console.log(response);\r\n\r\n    const responseJson = await response.json();\r\n\r\n    if ( responseJson.status === 1 ) {\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-success\">\r\n          ${responseJson.message}\r\n        </div>\r\n      `;\r\n      location.reload();\r\n    } else {\r\n      signinStatus.innerHTML = `\r\n        <div class=\"modal-status modal-status-danger\">\r\n          ${responseJson.message}\r\n        </div>\r\n      `;\r\n      signinFieldset.removeAttribute('disabled');\r\n    }\r\n  });\r\n});"],"names":["document","addEventListener","modalOpen","querySelectorAll","modalClose","modal","querySelector","tabs","signinForm","signupForm","forEach","el","e","preventDefault","classList","add","remove","tab","tabId","target","getAttribute","tabContent","style","display","signupFieldset","setAttribute","signupStatus","innerHTML","formData","username","value","email","password","response","fetch","bwdAuthRest","signup","method","headers","body","JSON","stringify","responseJson","json","status","location","reload","removeAttribute","signinFieldset","signinStatus","console","log","login","message"],"sourceRoot":""}